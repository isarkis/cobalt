name: GN
description: Generates and checks GN.
runs:
  using: "composite"
  steps:
    - name: Set Env Variables
      run: echo "PYTHONPATH=$GITHUB_WORKSPACE" >> $GITHUB_ENV
      shell: bash
    - name: gn gen
      run: |
          gn gen $GITHUB_WORKSPACE/out/${{matrix.target_platform}}_${{matrix.config}} --args="target_platform=\"${{matrix.target_platform}}\" ${{matrix.sb_api_version}} ${{matrix.target_os}} ${{matrix.target_cpu}} ${{matrix.extra_gn_arguments}} is_internal_build=false build_type=\"${{matrix.config}}\""
      shell: bash
    - name: gn check
      run: |
        gn check $GITHUB_WORKSPACE/out/${{ matrix.target_platform }}_${{ matrix.config }}
      shell: bash
